---
layout: post
title:  "Sourcery, great refactoring tool"
date:   2022-09-15 22:58:41 +0400
categories: blog
---
[![Sourcery](https://img.shields.io/badge/Sourcery-enabled-brightgreen)](https://sourcery.ai)

Somewhere a year ago I stumped upon the tool called Sourcery. 
It is a great tool for refactoring your code.
It can be used as a plugin for PyCharm, Vs Code.

look at the action below
![Sourcery gif](/img/blog/sourcery_example.gif)


{% highlight Python %}
# Before
def is_even(num):
    if num % 2 == 0:
        return True
    else:
        return False

# After
def is_even(num):
    return num % 2 == 0

{% endhighlight %}

{% highlight Python %}
# Before. A harder example

def get_booking_by_id(booking_id):
    if not HotelReservations.objects.filter(
        id=booking_id
    ).exists():
        return JsonResponse(
            {
                "code": -1,
                "msg": gettext(
                    "booking with specified id not found"
                ),
                "result": [],
            },
            safe=False,
        )
    else:
        return get_one_booking_details_by_id(
            request, booking_id, customer_id, flat_id
        )

# Suggestion -> Swap if/else branches to remove negation
# After

def get_booking_by_id(booking_id):
    return (
        get_one_booking_details_by_id(request, booking_id, customer_id, flat_id)
        if HotelReservations.objects.filter(
            id=booking_id, customerId=customer_id
            ).exists()
        else JsonResponse(
            {
                "code": -1,
                "msg": gettext(
                    "booking with specified id not found"
                ),
                "result": [],
            },
            safe=False,
            )
    )
    
{% endhighlight %}


it can also scan for low code quality and suggest to extract methods, remove unused variables, etc.

{% highlight Python %}

they have a lot of refactoring options, and you can even create your own refactoring rules.
they have 3 tiers
- Free
- Pro
- Team

even the free tier is great.

you can check it out here [Sourcery](https://sourcery.ai/)


